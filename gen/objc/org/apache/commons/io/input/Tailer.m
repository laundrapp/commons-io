//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/marcussmith/temp/commons-io/src/main/java/org/apache/commons/io/input/Tailer.java
//

#include "IOSPrimitiveArray.h"
#include "J2ObjC_source.h"
#include "java/io/File.h"
#include "java/io/FileNotFoundException.h"
#include "java/io/RandomAccessFile.h"
#include "java/lang/Exception.h"
#include "java/lang/InterruptedException.h"
#include "java/lang/StringBuilder.h"
#include "java/lang/System.h"
#include "java/lang/Thread.h"
#include "org/apache/commons/io/FileUtils.h"
#include "org/apache/commons/io/IOUtils.h"
#include "org/apache/commons/io/input/Tailer.h"
#include "org/apache/commons/io/input/TailerListener.h"

@interface OrgApacheCommonsIoInputTailer () {
 @public
  /*!
   @brief Buffer on top of RandomAccessFile.
   */
  IOSByteArray *inbuf_;
  /*!
   @brief The file which will be tailed.
   */
  JavaIoFile *file_;
  /*!
   @brief The amount of time to wait for the file to be updated.
   */
  jlong delayMillis_;
  /*!
   @brief Whether to tail from the end or start of file
   */
  jboolean end_;
  /*!
   @brief The listener to notify of events when tailing.
   */
  id<OrgApacheCommonsIoInputTailerListener> listener_;
  /*!
   @brief Whether to close and reopen the file whilst waiting for more input.
   */
  jboolean reOpen_;
  /*!
   @brief The tailer will run as long as this value is true.
   */
  volatile_jboolean run_;
}

@end

J2OBJC_FIELD_SETTER(OrgApacheCommonsIoInputTailer, inbuf_, IOSByteArray *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsIoInputTailer, file_, JavaIoFile *)
J2OBJC_FIELD_SETTER(OrgApacheCommonsIoInputTailer, listener_, id<OrgApacheCommonsIoInputTailerListener>)

inline jint OrgApacheCommonsIoInputTailer_get_DEFAULT_DELAY_MILLIS(void);
#define OrgApacheCommonsIoInputTailer_DEFAULT_DELAY_MILLIS 1000
J2OBJC_STATIC_FIELD_CONSTANT(OrgApacheCommonsIoInputTailer, DEFAULT_DELAY_MILLIS, jint)

inline NSString *OrgApacheCommonsIoInputTailer_get_RAF_MODE(void);
static NSString *OrgApacheCommonsIoInputTailer_RAF_MODE = @"r";
J2OBJC_STATIC_FIELD_OBJ_FINAL(OrgApacheCommonsIoInputTailer, RAF_MODE, NSString *)

inline jint OrgApacheCommonsIoInputTailer_get_DEFAULT_BUFSIZE(void);
#define OrgApacheCommonsIoInputTailer_DEFAULT_BUFSIZE 4096
J2OBJC_STATIC_FIELD_CONSTANT(OrgApacheCommonsIoInputTailer, DEFAULT_BUFSIZE, jint)

__attribute__((unused)) static jlong OrgApacheCommonsIoInputTailer_readLinesWithJavaIoRandomAccessFile_(OrgApacheCommonsIoInputTailer *self, JavaIoRandomAccessFile *reader);

@implementation OrgApacheCommonsIoInputTailer

- (instancetype __nonnull)initWithJavaIoFile:(JavaIoFile *)file
   withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_(self, file, listener);
  return self;
}

- (instancetype __nonnull)initWithJavaIoFile:(JavaIoFile *)file
   withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                    withLong:(jlong)delayMillis {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_(self, file, listener, delayMillis);
  return self;
}

- (instancetype __nonnull)initWithJavaIoFile:(JavaIoFile *)file
   withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                    withLong:(jlong)delayMillis
                                 withBoolean:(jboolean)end {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(self, file, listener, delayMillis, end);
  return self;
}

- (instancetype __nonnull)initWithJavaIoFile:(JavaIoFile *)file
   withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                    withLong:(jlong)delayMillis
                                 withBoolean:(jboolean)end
                                 withBoolean:(jboolean)reOpen {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_(self, file, listener, delayMillis, end, reOpen);
  return self;
}

- (instancetype __nonnull)initWithJavaIoFile:(JavaIoFile *)file
   withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                    withLong:(jlong)delayMillis
                                 withBoolean:(jboolean)end
                                     withInt:(jint)bufSize {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(self, file, listener, delayMillis, end, bufSize);
  return self;
}

- (instancetype __nonnull)initWithJavaIoFile:(JavaIoFile *)file
   withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                    withLong:(jlong)delayMillis
                                 withBoolean:(jboolean)end
                                 withBoolean:(jboolean)reOpen
                                     withInt:(jint)bufSize {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(self, file, listener, delayMillis, end, reOpen, bufSize);
  return self;
}

+ (OrgApacheCommonsIoInputTailer *)createWithJavaIoFile:(JavaIoFile *)file
              withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                               withLong:(jlong)delayMillis
                                            withBoolean:(jboolean)end
                                                withInt:(jint)bufSize {
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(file, listener, delayMillis, end, bufSize);
}

+ (OrgApacheCommonsIoInputTailer *)createWithJavaIoFile:(JavaIoFile *)file
              withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                               withLong:(jlong)delayMillis
                                            withBoolean:(jboolean)end
                                            withBoolean:(jboolean)reOpen
                                                withInt:(jint)bufSize {
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(file, listener, delayMillis, end, reOpen, bufSize);
}

+ (OrgApacheCommonsIoInputTailer *)createWithJavaIoFile:(JavaIoFile *)file
              withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                               withLong:(jlong)delayMillis
                                            withBoolean:(jboolean)end {
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(file, listener, delayMillis, end);
}

+ (OrgApacheCommonsIoInputTailer *)createWithJavaIoFile:(JavaIoFile *)file
              withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                               withLong:(jlong)delayMillis
                                            withBoolean:(jboolean)end
                                            withBoolean:(jboolean)reOpen {
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_(file, listener, delayMillis, end, reOpen);
}

+ (OrgApacheCommonsIoInputTailer *)createWithJavaIoFile:(JavaIoFile *)file
              withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener
                                               withLong:(jlong)delayMillis {
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_(file, listener, delayMillis);
}

+ (OrgApacheCommonsIoInputTailer *)createWithJavaIoFile:(JavaIoFile *)file
              withOrgApacheCommonsIoInputTailerListener:(id<OrgApacheCommonsIoInputTailerListener>)listener {
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_(file, listener);
}

- (JavaIoFile *)getFile {
  return file_;
}

- (jlong)getDelay {
  return delayMillis_;
}

- (void)run {
  JavaIoRandomAccessFile *reader = nil;
  @try {
    jlong last = 0;
    jlong position = 0;
    while (JreLoadVolatileBoolean(&run_) && reader == nil) {
      @try {
        reader = create_JavaIoRandomAccessFile_initWithJavaIoFile_withNSString_(file_, OrgApacheCommonsIoInputTailer_RAF_MODE);
      }
      @catch (JavaIoFileNotFoundException *e) {
        [((id<OrgApacheCommonsIoInputTailerListener>) nil_chk(listener_)) fileNotFound];
      }
      if (reader == nil) {
        @try {
          JavaLangThread_sleepWithLong_(delayMillis_);
        }
        @catch (JavaLangInterruptedException *e) {
        }
      }
      else {
        position = end_ ? [((JavaIoFile *) nil_chk(file_)) length] : 0;
        last = JavaLangSystem_currentTimeMillis();
        [reader seekWithLong:position];
      }
    }
    while (JreLoadVolatileBoolean(&run_)) {
      jboolean newer = OrgApacheCommonsIoFileUtils_isFileNewerWithJavaIoFile_withLong_(file_, last);
      jlong length = [((JavaIoFile *) nil_chk(file_)) length];
      if (length < position) {
        [((id<OrgApacheCommonsIoInputTailerListener>) nil_chk(listener_)) fileRotated];
        @try {
          JavaIoRandomAccessFile *save = reader;
          reader = create_JavaIoRandomAccessFile_initWithJavaIoFile_withNSString_(file_, OrgApacheCommonsIoInputTailer_RAF_MODE);
          position = 0;
          OrgApacheCommonsIoIOUtils_closeQuietlyWithJavaIoCloseable_(save);
        }
        @catch (JavaIoFileNotFoundException *e) {
          [listener_ fileNotFound];
        }
        continue;
      }
      else {
        if (length > position) {
          position = OrgApacheCommonsIoInputTailer_readLinesWithJavaIoRandomAccessFile_(self, reader);
          last = JavaLangSystem_currentTimeMillis();
        }
        else if (newer) {
          position = 0;
          [((JavaIoRandomAccessFile *) nil_chk(reader)) seekWithLong:position];
          position = OrgApacheCommonsIoInputTailer_readLinesWithJavaIoRandomAccessFile_(self, reader);
          last = JavaLangSystem_currentTimeMillis();
        }
      }
      if (reOpen_) {
        OrgApacheCommonsIoIOUtils_closeQuietlyWithJavaIoCloseable_(reader);
      }
      @try {
        JavaLangThread_sleepWithLong_(delayMillis_);
      }
      @catch (JavaLangInterruptedException *e) {
      }
      if (JreLoadVolatileBoolean(&run_) && reOpen_) {
        reader = create_JavaIoRandomAccessFile_initWithJavaIoFile_withNSString_(file_, OrgApacheCommonsIoInputTailer_RAF_MODE);
        [reader seekWithLong:position];
      }
    }
  }
  @catch (JavaLangException *e) {
    [((id<OrgApacheCommonsIoInputTailerListener>) nil_chk(listener_)) handleWithJavaLangException:e];
  }
  @finally {
    OrgApacheCommonsIoIOUtils_closeQuietlyWithJavaIoCloseable_(reader);
  }
}

- (void)stop {
  JreAssignVolatileBoolean(&self->run_, false);
}

- (void)dealloc {
  RELEASE_(inbuf_);
  RELEASE_(file_);
  RELEASE_(listener_);
  [super dealloc];
}

@end

void OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_(OrgApacheCommonsIoInputTailer *self, JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener) {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_(self, file, listener, OrgApacheCommonsIoInputTailer_DEFAULT_DELAY_MILLIS);
}

OrgApacheCommonsIoInputTailer *new_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener) {
  J2OBJC_NEW_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_, file, listener)
}

OrgApacheCommonsIoInputTailer *create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener) {
  J2OBJC_CREATE_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_, file, listener)
}

void OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_(OrgApacheCommonsIoInputTailer *self, JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis) {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(self, file, listener, delayMillis, false);
}

OrgApacheCommonsIoInputTailer *new_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis) {
  J2OBJC_NEW_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_, file, listener, delayMillis)
}

OrgApacheCommonsIoInputTailer *create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis) {
  J2OBJC_CREATE_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_, file, listener, delayMillis)
}

void OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(OrgApacheCommonsIoInputTailer *self, JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end) {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(self, file, listener, delayMillis, end, OrgApacheCommonsIoInputTailer_DEFAULT_BUFSIZE);
}

OrgApacheCommonsIoInputTailer *new_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end) {
  J2OBJC_NEW_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_, file, listener, delayMillis, end)
}

OrgApacheCommonsIoInputTailer *create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end) {
  J2OBJC_CREATE_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_, file, listener, delayMillis, end)
}

void OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_(OrgApacheCommonsIoInputTailer *self, JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen) {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(self, file, listener, delayMillis, end, reOpen, OrgApacheCommonsIoInputTailer_DEFAULT_BUFSIZE);
}

OrgApacheCommonsIoInputTailer *new_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen) {
  J2OBJC_NEW_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_, file, listener, delayMillis, end, reOpen)
}

OrgApacheCommonsIoInputTailer *create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen) {
  J2OBJC_CREATE_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_, file, listener, delayMillis, end, reOpen)
}

void OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(OrgApacheCommonsIoInputTailer *self, JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jint bufSize) {
  OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(self, file, listener, delayMillis, end, false, bufSize);
}

OrgApacheCommonsIoInputTailer *new_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jint bufSize) {
  J2OBJC_NEW_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_, file, listener, delayMillis, end, bufSize)
}

OrgApacheCommonsIoInputTailer *create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jint bufSize) {
  J2OBJC_CREATE_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_, file, listener, delayMillis, end, bufSize)
}

void OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(OrgApacheCommonsIoInputTailer *self, JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen, jint bufSize) {
  NSObject_init(self);
  JreAssignVolatileBoolean(&self->run_, true);
  JreStrongAssign(&self->file_, file);
  self->delayMillis_ = delayMillis;
  self->end_ = end;
  JreStrongAssignAndConsume(&self->inbuf_, [IOSByteArray newArrayWithLength:bufSize]);
  JreStrongAssign(&self->listener_, listener);
  [((id<OrgApacheCommonsIoInputTailerListener>) nil_chk(listener)) init__WithOrgApacheCommonsIoInputTailer:self];
  self->reOpen_ = reOpen;
}

OrgApacheCommonsIoInputTailer *new_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen, jint bufSize) {
  J2OBJC_NEW_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_, file, listener, delayMillis, end, reOpen, bufSize)
}

OrgApacheCommonsIoInputTailer *create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen, jint bufSize) {
  J2OBJC_CREATE_IMPL(OrgApacheCommonsIoInputTailer, initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_, file, listener, delayMillis, end, reOpen, bufSize)
}

OrgApacheCommonsIoInputTailer *OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jint bufSize) {
  OrgApacheCommonsIoInputTailer_initialize();
  OrgApacheCommonsIoInputTailer *tailer = create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(file, listener, delayMillis, end, bufSize);
  JavaLangThread *thread = create_JavaLangThread_initWithJavaLangRunnable_(tailer);
  [thread setDaemonWithBoolean:true];
  [thread start];
  return tailer;
}

OrgApacheCommonsIoInputTailer *OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen, jint bufSize) {
  OrgApacheCommonsIoInputTailer_initialize();
  OrgApacheCommonsIoInputTailer *tailer = create_OrgApacheCommonsIoInputTailer_initWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(file, listener, delayMillis, end, reOpen, bufSize);
  JavaLangThread *thread = create_JavaLangThread_initWithJavaLangRunnable_(tailer);
  [thread setDaemonWithBoolean:true];
  [thread start];
  return tailer;
}

OrgApacheCommonsIoInputTailer *OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end) {
  OrgApacheCommonsIoInputTailer_initialize();
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withInt_(file, listener, delayMillis, end, OrgApacheCommonsIoInputTailer_DEFAULT_BUFSIZE);
}

OrgApacheCommonsIoInputTailer *OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis, jboolean end, jboolean reOpen) {
  OrgApacheCommonsIoInputTailer_initialize();
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_withBoolean_withInt_(file, listener, delayMillis, end, reOpen, OrgApacheCommonsIoInputTailer_DEFAULT_BUFSIZE);
}

OrgApacheCommonsIoInputTailer *OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener, jlong delayMillis) {
  OrgApacheCommonsIoInputTailer_initialize();
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(file, listener, delayMillis, false);
}

OrgApacheCommonsIoInputTailer *OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_(JavaIoFile *file, id<OrgApacheCommonsIoInputTailerListener> listener) {
  OrgApacheCommonsIoInputTailer_initialize();
  return OrgApacheCommonsIoInputTailer_createWithJavaIoFile_withOrgApacheCommonsIoInputTailerListener_withLong_withBoolean_(file, listener, OrgApacheCommonsIoInputTailer_DEFAULT_DELAY_MILLIS, false);
}

jlong OrgApacheCommonsIoInputTailer_readLinesWithJavaIoRandomAccessFile_(OrgApacheCommonsIoInputTailer *self, JavaIoRandomAccessFile *reader) {
  JavaLangStringBuilder *sb = create_JavaLangStringBuilder_init();
  jlong pos = [((JavaIoRandomAccessFile *) nil_chk(reader)) getFilePointer];
  jlong rePos = pos;
  jint num;
  jboolean seenCR = false;
  while (JreLoadVolatileBoolean(&self->run_) && ((num = [reader readWithByteArray:self->inbuf_]) != -1)) {
    for (jint i = 0; i < num; i++) {
      jbyte ch = IOSByteArray_Get(nil_chk(self->inbuf_), i);
      switch (ch) {
        case 0x000a:
        seenCR = false;
        [((id<OrgApacheCommonsIoInputTailerListener>) nil_chk(self->listener_)) handleWithNSString:[sb description]];
        [sb setLengthWithInt:0];
        rePos = pos + i + 1;
        break;
        case 0x000d:
        if (seenCR) {
          [sb appendWithChar:0x000d];
        }
        seenCR = true;
        break;
        default:
        if (seenCR) {
          seenCR = false;
          [((id<OrgApacheCommonsIoInputTailerListener>) nil_chk(self->listener_)) handleWithNSString:[sb description]];
          [sb setLengthWithInt:0];
          rePos = pos + i + 1;
        }
        [sb appendWithChar:(jchar) ch];
      }
    }
    pos = [reader getFilePointer];
  }
  [reader seekWithLong:rePos];
  return rePos;
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgApacheCommonsIoInputTailer)
